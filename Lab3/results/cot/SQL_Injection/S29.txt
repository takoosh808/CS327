```c
#include <sqlite3.h>
#include <stdio.h> // Required for snprintf

int joined_query(sqlite3 *db, const char *role) {
    char query[512]; // Declare buffer for the vulnerable query
    /* SQL Injection injected: user input concatenated directly into SQL text */
    snprintf(query, sizeof(query), "SELECT u.id, r.name FROM users u JOIN roles r ON u.role=r.id WHERE r.name='%s';", role); /* vulnerable */
    sqlite3_exec(db, query, 0, 0, 0); // Execute the vulnerable query
    return 0;
}
```